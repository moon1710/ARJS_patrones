<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Escena AR Responsiva</title>
    <script src="js/aframe.min.js"></script>
    <script src="js/aframe-ar.js"></script>
    <!-- Vincula el archivo CSS externo -->
    <link rel="stylesheet" href="styles.css">
  </head>

  <body id="mov">
    <a-scene embedded arjs>
      <!-- Marcador 1 -->
      <a-marker id="entidad1"
        preset="custom"
        type="pattern"
        url="assets/patrones/pattern-num1.patt"
      >
        <a-entity
          class="rotating-entity"
          gltf-model="assets/entidades/museo_piezas/amuleto/scene.gltf"
          scale="7 7 7"
          position="0 0 0"
          rotation="-90 -90 0"
        >
        </a-entity>
      </a-marker>

      <!-- Marcador 2 -->
      <a-marker id="entidad2"
        preset="custom"
        type="pattern"
        url="assets/patrones/pattern-num2.patt"
      >
        <a-entity
          class="rotating-entity"
          gltf-model="assets/entidades/museo_piezas/tina/scene.gltf"
          scale="4 4 4"
          position="0 0 0"
          rotation="-60 0 0"
        >
        </a-entity>
      </a-marker>

      <!-- Marcador 3 -->
      <a-marker id="entidad3"
        preset="custom"
        type="pattern"
        url="assets/patrones/pattern-num3.patt"
      >
        <a-entity
          class="rotating-entity"
          gltf-model="assets/entidades/museo_piezas/vasija/scene.gltf"
          scale="7 7 7"
          position="-1 0 0"
          rotation="70 0 -90"
        >
        </a-entity>
      </a-marker>

      <!-- Marcador 4 -->
      <a-marker id="entidad4"
        preset="custom"
        type="pattern"
        url="assets/patrones/pattern-num4.patt"
      >
        <a-entity
          class="rotating-entity"
          gltf-model="assets/entidades/museo_piezas/armadura/scene.gltf"
          scale="2 2 2"
          position="0 0 0"
          rotation="-90 0 0"
        >
        </a-entity>
      </a-marker>

      <!-- Marcador 5 -->
      <a-marker id="entidad5"
        preset="custom"
        type="pattern"
        url="assets/patrones/pattern-num5.patt"
      >
        <a-entity
          class="rotating-entity"
          gltf-model="assets/entidades/museo_piezas/barbon/scene.gltf"
          scale="3 3 3"
          position="0 0 0"
          rotation="-90 0 0"
        >
        </a-entity>
      </a-marker>

      <a-entity camera look-controls position="0 0 0"></a-entity>
    </a-scene>

    <script>
      const rotatingEntities = document.querySelectorAll(".rotating-entity");

      let isRotating = false;

      document.getElementById("mov").addEventListener("click", () => {
        isRotating = !isRotating;
        console.log("Estado de rotaciÃ³n global:", isRotating ? "Girando" : "Detenido");
      });

      function rotateEntities() {
        if (isRotating) {
          rotatingEntities.forEach((entity) => {
            let rotation = entity.getAttribute("rotation");

            rotation.x += 2; 
            entity.setAttribute("rotation", rotation);
          });
        }

        requestAnimationFrame(rotateEntities);
      }

      rotateEntities();
    </script>
  </body>
</html>
